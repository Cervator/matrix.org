{% extends "section.html" %}
{% block content -%}
<div class="content">
    {% for page in paginator.pages %}
    <article class="post">
        <header>
            <h1><a href="{{ page.permalink }}" title="{{ page.title }}">{{ page.title }}</a></h1>
            <span>
                {{ page.date | date(format="%d.%m.%Y %H:%M") }}
                {% if page.taxonomies.category -%}
                —
                {% for category in page.taxonomies.category %}
                <a href="/category/{{ category | slugify }}">
                    {{- category -}}
                </a>
                {%- if not loop.last %}, {% endif %}{% endfor %}
                {% endif %}
                —
                {% set authors = load_data(path="content/authors.toml") %}
                {% set author_details = authors.author %}
                {% for author_alias in page.taxonomies.author %}
                    {% set_global author_name = author_alias %}
                    {% for key, value in author_details %}
                        {% if value.name == author_alias or author_alias in value.aliases %}
                            {% set_global author_name = value.name %}
                        {% endif %}
                    {% endfor %}
                    <a href="/author/{{ author_name | slugify }}">
                        {{- author_name -}}
                    </a>
                    {%- if not loop.last %}, {% endif %}
                {% endfor %}
            </span>
            {% if page.updated -%}
            <br>
            <small>Last update: {{ page.updated | date(format="%d.%m.%Y %H:%M") }}</small>
            {%- endif %}
        </header>
        <div>
            {% if page.summary -%}
            {{ page.summary | safe }}
            <p><a href="{{ page.path | safe }}#continue-reading">Continue reading…</a></p>
            {% else -%}
            {{ page.content | safe }}
            {%- endif %}
        </div>
    </article>
    {% endfor %}
    {% include "includes/pagination.html" %}
</div>
{%- endblock content %}
